(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{24:function(e,t,n){},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),r=n(6),a=n.n(r),s=(n(22),n(23),n(24),n(7)),i=n(16),l=n(3),u=n.n(l),d=n(5),p=n(2),f=n(0),j="https://mate.academy/students-api";function b(e){return new Promise((function(t){setTimeout(t,e)}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:t};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),b(300).then((function(){return fetch(j+e,o)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var O,h=function(e){return m(e)},v=function(e,t){return m(e,"POST",t)},x=function(e,t){return m(e,"PATCH",t)},T=function(e){return m(e,"DELETE")},g=function(e){return T("/todos/".concat(e))},k=function(e){var t=e.userId,n=e.title,o=e.completed;return v("/todos",{userId:t,title:n,completed:o})},_=function(e){var t=e.id,n=e.userId,o=e.title,c=e.completed;return x("/todos/".concat(t),{userId:n,title:o,completed:c})},N=11383,E=c.a.createContext({todos:[],todosUncompleted:0,todosCompleted:[],addTodo:function(){},toggleTodo:function(){},toogleAll:function(){},deleteTodo:function(){},deleteComplitedTodo:function(){},updateTodo:function(){},isError:{isError:!1,message:""},setIsError:function(){},tempoTodo:null,setTempoTodo:function(){},inputValue:"",setInputValue:function(){},isOnAdd:!1,setIsOnAdd:function(){},isCompliteDeleting:!1,isToogleAllClick:!1,isTodoOnUpdate:null,resetError:function(){},handleAddTodoError:function(){}}),C=function(e){var t,n=e.children,c=Object(o.useState)([]),r=Object(p.a)(c,2),a=r[0],l=r[1],j=Object(o.useState)({isError:!1,message:""}),b=Object(p.a)(j,2),m=b[0],O=b[1],v=Object(o.useState)(null),x=Object(p.a)(v,2),T=x[0],C=x[1],y=Object(o.useState)(!1),A=Object(p.a)(y,2),w=A[0],S=A[1],I=Object(o.useState)(""),U=Object(p.a)(I,2),F=U[0],D=U[1],P=Object(o.useState)(!1),V=Object(p.a)(P,2),J=V[0],B=V[1],M=Object(o.useState)(!1),R=Object(p.a)(M,2),G=R[0],H=R[1],L=Object(o.useState)(null),W=Object(p.a)(L,2),q=W[0],z=W[1],K=function(){O({isError:!1,message:""})},Q=function(e){O({isError:!0,message:e})};Object(o.useEffect)((function(){return m.isError&&(t=setTimeout((function(){K()}),3e3)),function(){t&&clearTimeout(t)}}),[m,K]);var X=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.prev=1,e.next=4,n(t);case 4:(o=e.sent)&&(c=a.map((function(e){return e.id===o.id?o:e})),l(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Q("Unable to update todo");case 11:return e.prev=11,z(null),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e;(e=N,h("/todos?userId=".concat(e))).then((function(e){l(e)})).catch((function(e){O({isError:!0,message:"".concat(e)})}))}),[]);var Y=Object(o.useMemo)((function(){return a.filter((function(e){return!e.completed})).length}),[a]),Z=Object(o.useMemo)((function(){return a.filter((function(e){return e.completed}))}),[a]),$=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,C(t={id:0,userId:N,title:F,completed:!1}),e.next=6,k(t);case 6:(n=e.sent)&&l([].concat(Object(i.a)(a),[n])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),Q("Unable to add a todo");case 13:return e.prev=13,C(null),D(""),S(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed}),e.next=3,X(n,_);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),t=a.every((function(e){return!0===e.completed})),n=a.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{completed:!t})})),e.prev=3,o=n.map((function(e){return _(e)})),e.next=7,Promise.all(o);case 7:l(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Q("Unable to update todos");case 13:return e.prev=13,H(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.a)(Object(s.a)({},n),{},{title:t}),e.next=3,X(o,_);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t),e.prev=1,e.next=4,g(t.id);case 4:l(a.filter((function(e){return e.id!==t.id}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Q("Unable to delete a todo");case 10:return e.prev=10,z(null),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Z.length>0)){e.next=15;break}return B(!0),e.prev=2,t=Z.map((function(e){return g(e.id)})),e.next=6,Promise.all(t);case 6:l(a.filter((function(e){return!e.completed}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Q("Unable to delete a todo");case 12:return e.prev=12,B(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),re={todos:a,todosUncompleted:Y,todosCompleted:Z,addTodo:$,toggleTodo:ee,toogleAll:te,deleteTodo:oe,deleteComplitedTodo:ce,updateTodo:ne,isError:m,setIsError:O,resetError:K,tempoTodo:T,setTempoTodo:C,inputValue:F,setInputValue:D,isOnAdd:w,setIsOnAdd:S,isCompliteDeleting:J,isToogleAllClick:G,isTodoOnUpdate:q,handleAddTodoError:Q};return Object(f.jsx)(E.Provider,{value:re,children:n})},y=function(){return c.a.useContext(E)},A=n(4),w=n.n(A),S=function(){var e,t=y(),n=t.todos,c=t.todosUncompleted,r=t.toogleAll,a=t.addTodo,s=t.isOnAdd,i=t.inputValue,l=t.setInputValue,u=t.handleAddTodoError,d=t.resetError,j=t.isError,b=Object(o.useRef)(null),m=Object(o.useState)(!1),O=Object(p.a)(m,2),h=O[0],v=O[1];return Object(o.useEffect)((function(){j.isError&&""!==i.trim()&&(d(),e&&clearTimeout(e))}),[i,j,d]),Object(o.useEffect)((function(){h&&b.current&&b.current.focus()}),[n,h,b.current]),Object(f.jsxs)("header",{className:"todoapp__header",children:[!!n.length&&Object(f.jsx)("button",{type:"button",className:w()("todoapp__toggle-all",{active:!c}),title:"Togle All",onClick:r}),Object(f.jsx)("form",{onSubmit:function(t){t.preventDefault(),i.trim()?a(i):(u("Title can't be empty"),e&&clearTimeout(e),e=setTimeout((function(){d()}),3e3))},children:Object(f.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:i,onChange:function(e){l(e.target.value),v(!0)},disabled:s,ref:b})})]})},I=n(33),U=n(32),F=function(e){var t=e.todo,n=y(),c=n.toggleTodo,r=n.deleteTodo,a=n.updateTodo,s=n.isCompliteDeleting,i=n.isToogleAllClick,l=n.isTodoOnUpdate,u=Object(o.useState)(!1),d=Object(p.a)(u,2),j=d[0],b=d[1],m=Object(o.useState)(!1),O=Object(p.a)(m,2),h=O[0],v=O[1],x=Object(o.useState)(""),T=Object(p.a)(x,2),g=T[0],k=T[1],_=Object(o.useRef)(null);Object(o.useEffect)((function(){h&&_.current&&_.current.focus()}),[h,_.current]),Object(o.useEffect)((function(){s&&t.completed&&b(!0)}),[s]),Object(o.useEffect)((function(){(null===l||void 0===l?void 0:l.id)===t.id&&b(!0),l||b(!1)}),[l]);var N=function(){g.trim()?a(g,t):r(t)};return Object(f.jsxs)("div",{onDoubleClick:function(){v(!0),k(t.title)},className:w()("todo",{completed:t.completed}),children:[Object(f.jsx)("label",{className:"todo__status-label",htmlFor:"todo-status-".concat(t.id),children:Object(f.jsx)("input",{type:"checkbox",className:"todo__status",title:"chekbox",onChange:function(){c(t)},id:"todo-status-".concat(t.id)})}),h?Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),v(!1),N()},onBlur:function(){v(!1),N()},children:Object(f.jsx)("input",{type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:g,onChange:function(e){k(e.target.value)},ref:_})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"todo__title",children:t.title}),Object(f.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){r(t)},children:"\xd7"})]}),Object(f.jsxs)("div",{className:w()("modal overlay",{"is-active":j||i}),children:[Object(f.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(f.jsx)("div",{className:"loader"})]})]})},D=function(e){var t=e.tempoTodo;return Object(f.jsxs)("div",{className:"todo",children:[Object(f.jsx)("label",{className:"todo__status-label",htmlFor:"tempo-todo-status",children:Object(f.jsx)("input",{type:"checkbox",className:"todo__status",title:"chekbox",id:"tempo-todo-status"})}),Object(f.jsx)("span",{className:"todo__title",children:t.title}),Object(f.jsx)("button",{type:"button",className:"todo__remove",children:"\xd7"}),Object(f.jsxs)("div",{className:"modal overlay is-active",children:[Object(f.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(f.jsx)("div",{className:"loader"})]})]})};!function(e){e.All="all",e.Active="active",e.Complited="completed"}(O||(O={}));n(27);var P=function(e){var t=e.todos,n=e.selectedFilter,o=e.tempoTodo,c=function(e,t){switch(t){case O.Active:return e.filter((function(e){return!e.completed}));case O.Complited:return e.filter((function(e){return e.completed}));default:return e}}(t,n);return Object(f.jsxs)("section",{className:"todoapp__main",children:[Object(f.jsx)(I.a,{children:c.map((function(e){return Object(f.jsx)(U.a,{classNames:"todo",timeout:300,children:Object(f.jsx)(F,{todo:e})},e.id)}))}),!!o&&Object(f.jsx)(U.a,{classNames:"todo",timeout:500,children:Object(f.jsx)(D,{tempoTodo:o})},o.id)]})},V=function(e){var t=e.selectedFilter,n=e.selectTheFilter,o=y(),c=o.todosCompleted,r=o.todosUncompleted,a=o.deleteComplitedTodo;return Object(f.jsxs)("footer",{className:"todoapp__footer",children:[Object(f.jsx)("span",{className:"todo-count",children:1===r?"1 item left":"".concat(r," items left")}),Object(f.jsxs)("nav",{className:"filter",children:[Object(f.jsx)("a",{href:"#/",className:w()("filter__link",{selected:t===O.All}),onClick:function(){return n(O.All)},children:"All"}),Object(f.jsx)("a",{href:"#/active",className:w()("filter__link",{selected:t===O.Active}),onClick:function(){return n(O.Active)},children:"Active"}),Object(f.jsx)("a",{href:"#/completed",className:w()("filter__link",{selected:t===O.Complited}),onClick:function(){return n(O.Complited)},children:"Completed"})]}),!!c&&Object(f.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:a,children:"Clear completed"})]})},J=function(){var e=y(),t=e.isError,n=e.resetError;return Object(f.jsxs)("div",{className:w()("notification is-danger is-light has-text-weight-normal",{hidden:!t.isError}),children:[Object(f.jsx)("button",{type:"button",className:"delete",title:"Click here",onClick:function(){n()}}),t.message]})},B=function(){var e=y(),t=e.todos,n=e.tempoTodo,c=Object(o.useState)(O.All),r=Object(p.a)(c,2),a=r[0],s=r[1];return Object(f.jsxs)("div",{className:"todoapp",children:[Object(f.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(f.jsxs)("section",{className:"todoapp__content",children:[Object(f.jsx)(S,{}),(!!t.length||n)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(P,{todos:t,tempoTodo:n,selectedFilter:a}),Object(f.jsx)(V,{selectedFilter:a,selectTheFilter:s})]})]}),Object(f.jsx)(J,{})]})},M=function(){return Object(f.jsx)(C,{children:Object(f.jsx)(B,{})})};a.a.render(Object(f.jsx)(M,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4b2f0180.chunk.js.map